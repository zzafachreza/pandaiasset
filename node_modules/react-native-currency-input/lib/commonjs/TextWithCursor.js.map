{"version":3,"sources":["TextWithCursor.tsx"],"names":["TextWithCursor","textWithCursorProps","children","cursorVisible","style","cursorProps","rest","blinkVisible","isTyping","setIsTyping","React","useState","timeout","useRef","cursorVisibility","useMemo","cursorFontSize","StyleSheet","flatten","styles","text","fontSize","useEffect","current","setTimeout","clearTimeout","textWithCursorView","cursor","cursorHidden","undefined","create","flexDirection","justifyContent","color","marginTop","marginLeft"],"mappings":";;;;;;;AAAA;;AACA;;AAGA;;;;;;;;;;AAEA,MAAMA,cAAc,GAAIC,mBAAD,IAA8C;AACnE,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,aAAZ;AAA2BC,IAAAA,KAA3B;AAAkCC,IAAAA,WAAlC;AAA+C,OAAGC;AAAlD,MAA2DL,mBAAjE;AAEA,QAAMM,YAAY,GAAG,wBAArB;AAEA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BC,KAAK,CAACC,QAAN,CAAe,KAAf,CAAhC;AAEA,QAAMC,OAAO,GAAGF,KAAK,CAACG,MAAN,EAAhB;AAEA,QAAMC,gBAAgB,GAAGJ,KAAK,CAACK,OAAN,CAAc,MAAM;AAC3C,WAAOZ,aAAa,KAAKI,YAAY,IAAIC,QAArB,CAApB;AACD,GAFwB,EAEtB,CAACD,YAAD,EAAeJ,aAAf,EAA8BK,QAA9B,CAFsB,CAAzB;AAIA,QAAMQ,cAAc,GAAGN,KAAK,CAACK,OAAN,CAAc,MAAM;AACzC,WAAOE,wBAAWC,OAAX,CAAmB,CAACC,MAAM,CAACC,IAAR,EAAchB,KAAd,CAAnB,EAAyCiB,QAAzC,IAAqD,EAA5D;AACD,GAFsB,EAEpB,CAACjB,KAAD,CAFoB,CAAvB;AAIAM,EAAAA,KAAK,CAACY,SAAN,CAAgB,MAAM;AACpBb,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAG,IAAAA,OAAO,CAACW,OAAR,GAAkBC,UAAU,CAAC,MAAM;AACjCf,MAAAA,WAAW,CAAC,KAAD,CAAX;AACD,KAF2B,EAEzB,GAFyB,CAA5B;AAIA,WAAO,MAAM;AACXG,MAAAA,OAAO,CAACW,OAAR,IAAmBE,YAAY,CAACb,OAAO,CAACW,OAAT,CAA/B;AACD,KAFD;AAGD,GATD,EASG,CAACrB,QAAD,CATH;AAWA,sBACE,oBAAC,iBAAD;AAAM,IAAA,KAAK,EAAEiB,MAAM,CAACO;AAApB,kBACE,oBAAC,iBAAD;AAAM,IAAA,KAAK,EAAE,CAACP,MAAM,CAACC,IAAR,EAAchB,KAAd;AAAb,KAAuCE,IAAvC,GACGJ,QADH,CADF,eAIE,oBAAC,iBAAD,eACMG,WADN;AAEE,IAAA,KAAK,EAAE,CACL;AACEgB,MAAAA,QAAQ,EAAEL,cAAc,IAAIA,cAAc,GAAG,EAAjB,GAAsB,IAAtB,GAA6B,IAAjC;AAD1B,KADK,EAILG,MAAM,CAACQ,MAJF,EAKLtB,WALK,aAKLA,WALK,uBAKLA,WAAW,CAAED,KALR,EAML,CAACU,gBAAD,GAAoBK,MAAM,CAACS,YAA3B,GAA0CC,SANrC;AAFT,UAJF,CADF;AAoBD,CAhDD;;AAkDA,MAAMV,MAAM,GAAGF,wBAAWa,MAAX,CAAkB;AAC/BJ,EAAAA,kBAAkB,EAAE;AAClBK,IAAAA,aAAa,EAAE,KADG;AAElBC,IAAAA,cAAc,EAAE;AAFE,GADW;AAK/BZ,EAAAA,IAAI,EAAE;AACJC,IAAAA,QAAQ,EAAE;AADN,GALyB;AAQ/BM,EAAAA,MAAM,EAAE;AACNM,IAAAA,KAAK,EAAE,SADD;AAENC,IAAAA,SAAS,EAAE,CAAC,CAFN;AAGNC,IAAAA,UAAU,EAAE,CAAC;AAHP,GARuB;AAa/BP,EAAAA,YAAY,EAAE;AACZK,IAAAA,KAAK,EAAE;AADK;AAbiB,CAAlB,CAAf;;eAkBejC,c","sourcesContent":["import * as React from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\n\nimport type { TextWithCursorProps } from './props';\nimport useBlink from './hooks/useBlink';\n\nconst TextWithCursor = (textWithCursorProps: TextWithCursorProps) => {\n  const { children, cursorVisible, style, cursorProps, ...rest } = textWithCursorProps;\n\n  const blinkVisible = useBlink();\n\n  const [isTyping, setIsTyping] = React.useState(false);\n\n  const timeout = React.useRef<NodeJS.Timeout>();\n\n  const cursorVisibility = React.useMemo(() => {\n    return cursorVisible && (blinkVisible || isTyping);\n  }, [blinkVisible, cursorVisible, isTyping]);\n\n  const cursorFontSize = React.useMemo(() => {\n    return StyleSheet.flatten([styles.text, style]).fontSize || 18;\n  }, [style]);\n\n  React.useEffect(() => {\n    setIsTyping(true);\n    timeout.current = setTimeout(() => {\n      setIsTyping(false);\n    }, 500);\n\n    return () => {\n      timeout.current && clearTimeout(timeout.current);\n    };\n  }, [children]);\n\n  return (\n    <View style={styles.textWithCursorView}>\n      <Text style={[styles.text, style]} {...rest}>\n        {children}\n      </Text>\n      <Text\n        {...cursorProps}\n        style={[\n          {\n            fontSize: cursorFontSize * (cursorFontSize < 26 ? 1.42 : 1.25),\n          },\n          styles.cursor,\n          cursorProps?.style,\n          !cursorVisibility ? styles.cursorHidden : undefined,\n        ]}\n      >\n        |\n      </Text>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  textWithCursorView: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n  },\n  text: {\n    fontSize: 18,\n  },\n  cursor: {\n    color: '#6495ed',\n    marginTop: -7,\n    marginLeft: -3,\n  },\n  cursorHidden: {\n    color: 'transparent',\n  },\n});\n\nexport default TextWithCursor;\n"]}