{"version":3,"sources":["TextWithCursor.tsx"],"names":["React","StyleSheet","Text","View","useBlink","TextWithCursor","textWithCursorProps","children","cursorVisible","style","cursorProps","rest","blinkVisible","isTyping","setIsTyping","useState","timeout","useRef","cursorVisibility","useMemo","cursorFontSize","flatten","styles","text","fontSize","useEffect","current","setTimeout","clearTimeout","textWithCursorView","cursor","cursorHidden","undefined","create","flexDirection","justifyContent","color","marginTop","marginLeft"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,UAAT,EAAqBC,IAArB,EAA2BC,IAA3B,QAAuC,cAAvC;AAGA,OAAOC,QAAP,MAAqB,kBAArB;;AAEA,MAAMC,cAAc,GAAIC,mBAAD,IAA8C;AACnE,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,aAAZ;AAA2BC,IAAAA,KAA3B;AAAkCC,IAAAA,WAAlC;AAA+C,OAAGC;AAAlD,MAA2DL,mBAAjE;AAEA,QAAMM,YAAY,GAAGR,QAAQ,EAA7B;AAEA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0Bd,KAAK,CAACe,QAAN,CAAe,KAAf,CAAhC;AAEA,QAAMC,OAAO,GAAGhB,KAAK,CAACiB,MAAN,EAAhB;AAEA,QAAMC,gBAAgB,GAAGlB,KAAK,CAACmB,OAAN,CAAc,MAAM;AAC3C,WAAOX,aAAa,KAAKI,YAAY,IAAIC,QAArB,CAApB;AACD,GAFwB,EAEtB,CAACD,YAAD,EAAeJ,aAAf,EAA8BK,QAA9B,CAFsB,CAAzB;AAIA,QAAMO,cAAc,GAAGpB,KAAK,CAACmB,OAAN,CAAc,MAAM;AACzC,WAAOlB,UAAU,CAACoB,OAAX,CAAmB,CAACC,MAAM,CAACC,IAAR,EAAcd,KAAd,CAAnB,EAAyCe,QAAzC,IAAqD,EAA5D;AACD,GAFsB,EAEpB,CAACf,KAAD,CAFoB,CAAvB;AAIAT,EAAAA,KAAK,CAACyB,SAAN,CAAgB,MAAM;AACpBX,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,IAAAA,OAAO,CAACU,OAAR,GAAkBC,UAAU,CAAC,MAAM;AACjCb,MAAAA,WAAW,CAAC,KAAD,CAAX;AACD,KAF2B,EAEzB,GAFyB,CAA5B;AAIA,WAAO,MAAM;AACXE,MAAAA,OAAO,CAACU,OAAR,IAAmBE,YAAY,CAACZ,OAAO,CAACU,OAAT,CAA/B;AACD,KAFD;AAGD,GATD,EASG,CAACnB,QAAD,CATH;AAWA,sBACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEe,MAAM,CAACO;AAApB,kBACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE,CAACP,MAAM,CAACC,IAAR,EAAcd,KAAd;AAAb,KAAuCE,IAAvC,GACGJ,QADH,CADF,eAIE,oBAAC,IAAD,eACMG,WADN;AAEE,IAAA,KAAK,EAAE,CACL;AACEc,MAAAA,QAAQ,EAAEJ,cAAc,IAAIA,cAAc,GAAG,EAAjB,GAAsB,IAAtB,GAA6B,IAAjC;AAD1B,KADK,EAILE,MAAM,CAACQ,MAJF,EAKLpB,WALK,aAKLA,WALK,uBAKLA,WAAW,CAAED,KALR,EAML,CAACS,gBAAD,GAAoBI,MAAM,CAACS,YAA3B,GAA0CC,SANrC;AAFT,UAJF,CADF;AAoBD,CAhDD;;AAkDA,MAAMV,MAAM,GAAGrB,UAAU,CAACgC,MAAX,CAAkB;AAC/BJ,EAAAA,kBAAkB,EAAE;AAClBK,IAAAA,aAAa,EAAE,KADG;AAElBC,IAAAA,cAAc,EAAE;AAFE,GADW;AAK/BZ,EAAAA,IAAI,EAAE;AACJC,IAAAA,QAAQ,EAAE;AADN,GALyB;AAQ/BM,EAAAA,MAAM,EAAE;AACNM,IAAAA,KAAK,EAAE,SADD;AAENC,IAAAA,SAAS,EAAE,CAAC,CAFN;AAGNC,IAAAA,UAAU,EAAE,CAAC;AAHP,GARuB;AAa/BP,EAAAA,YAAY,EAAE;AACZK,IAAAA,KAAK,EAAE;AADK;AAbiB,CAAlB,CAAf;AAkBA,eAAe/B,cAAf","sourcesContent":["import * as React from 'react';\nimport { StyleSheet, Text, View } from 'react-native';\n\nimport type { TextWithCursorProps } from './props';\nimport useBlink from './hooks/useBlink';\n\nconst TextWithCursor = (textWithCursorProps: TextWithCursorProps) => {\n  const { children, cursorVisible, style, cursorProps, ...rest } = textWithCursorProps;\n\n  const blinkVisible = useBlink();\n\n  const [isTyping, setIsTyping] = React.useState(false);\n\n  const timeout = React.useRef<NodeJS.Timeout>();\n\n  const cursorVisibility = React.useMemo(() => {\n    return cursorVisible && (blinkVisible || isTyping);\n  }, [blinkVisible, cursorVisible, isTyping]);\n\n  const cursorFontSize = React.useMemo(() => {\n    return StyleSheet.flatten([styles.text, style]).fontSize || 18;\n  }, [style]);\n\n  React.useEffect(() => {\n    setIsTyping(true);\n    timeout.current = setTimeout(() => {\n      setIsTyping(false);\n    }, 500);\n\n    return () => {\n      timeout.current && clearTimeout(timeout.current);\n    };\n  }, [children]);\n\n  return (\n    <View style={styles.textWithCursorView}>\n      <Text style={[styles.text, style]} {...rest}>\n        {children}\n      </Text>\n      <Text\n        {...cursorProps}\n        style={[\n          {\n            fontSize: cursorFontSize * (cursorFontSize < 26 ? 1.42 : 1.25),\n          },\n          styles.cursor,\n          cursorProps?.style,\n          !cursorVisibility ? styles.cursorHidden : undefined,\n        ]}\n      >\n        |\n      </Text>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  textWithCursorView: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n  },\n  text: {\n    fontSize: 18,\n  },\n  cursor: {\n    color: '#6495ed',\n    marginTop: -7,\n    marginLeft: -3,\n  },\n  cursorHidden: {\n    color: 'transparent',\n  },\n});\n\nexport default TextWithCursor;\n"]}